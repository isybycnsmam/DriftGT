// AUTO-GENERATED ON BUILD
// DO NOT CHANGE
// generated by pre build script '../extra_script.py'
#include <avr/pgmspace.h>
#include "ESPAsyncWebServer.h"

#ifndef STATIC_WEBSITE_CONTENT_H
#define STATIC_WEBSITE_CONTENT_H


const char ADVANCED_SCRIPTS_CONTENT[] PROGMEM = R"""(var a=document.getElementById('show-advanced-settings-button'),b=document.getElementById('close-advanced-settings-button'),c=document.getElementById('advanced-settings-container');a.onclick=()=>c.classList.remove('hide');b.onclick=()=>c.classList.add('hide');)""";

const char INDEX_CONTENT[] PROGMEM = R"""(<!doctype html><title>DriftGT</title><meta name=viewport content="width=device-width"><meta name=mobile-web-app-capable content=yes><link rel=stylesheet href=style.css><div class=slider-container><input type=range class="slider vertical-slider" min=-255 max=255 value=0 id=vertical-slider></div><div class=slider-container><input type=range class=slider min=-255 max=255 value=0 id=horizontal-slider></div><div class=settings-container><button id=connect-button>Connect</button> <button id=fullscreen-button>Fullscreen</button> <button id=show-advanced-settings-button>Advanced</button> <button id=show-user-controlls-button>Show controls</button><div id=user-control-options-container class=hide><button class=user-control-option data-name=arrows data-enabled=false>Enable arrows</button> <button class=user-control-option data-name=WSAD data-enabled=false>Enable WSAD</button> <button class="user-control-option enabled" data-name=touch data-enabled=true>Disable touch</button> <button class=user-control-option data-name=gamepad data-enabled=false>Enable gamepad</button></div></div><div id=advanced-settings-container class=hide><button id=close-advanced-settings-button>Close</button></div><div class=features-container><button id=horn-button>Horn</button> <button id=toggle-lights-button>Lights</button> <input id=lights-color-picker type=color value=#4A9CFF></div><script src=./scripts.js></script><script src=./advanced_scripts.js></script>)""";

const char SCRIPTS_CONTENT[] PROGMEM = R"""(var a='ws://192.168.4.1:80/ws',b=40,c=1,d=0,e=100,f=document.getElementById('connect-button'),g=document.getElementById('show-user-controlls-button'),h=document.getElementById('user-control-options-container'),i=document.querySelector('.user-control-option[data-name="gamepad"]'),j=document.getElementById("horn-button"),k=document.getElementById("toggle-lights-button"),l=document.getElementById("lights-color-picker"),m=document.getElementById('vertical-slider'),n=document.getElementById('horizontal-slider'),o,p=!1,q=!1,r=[74,156,255],s=!1,t,u=!1,v=!1,w=!1,x=!1,y=!1;function z(){console.log("Connecting to websocket");f.innerText="Connecting...";f.style.backgroundColor='#6687E2';o=new WebSocket(a);o.onopen=()=>{console.log("Websocket connected");f.style.backgroundColor='#66E976';f.innerText='Disconnect'};o.onclose=()=>{console.log("Websocket closed");f.style.backgroundColor='#FD616C';f.innerText='Connect*'};console.log("Successfully initialized websocket")}function _(){console.log("Closing websocket");f.innerText="Disconnecting...";f.style.backgroundColor='#6687E2';o.close()}f.onclick=()=>!o||o.readyState==WebSocket.CLOSED?z():o.readyState==WebSocket.OPEN&&_();function A(B,C){if(!o||o.readyState!==WebSocket.OPEN)return;let _c;B=='move'?_c=new Uint8Array([0,...C]):B=='lights'?_c=new Uint8Array([1,...C]):B=='horn'&&(_c=new Uint8Array([2,...C]));o.send(_c)}function aA(B,C){var _c=Math.abs(C),D=C>0?3:2;if(_c-b<0){A('move',[B,0,0]);return}A('move',[B,D,_c])}function aB(B){p=B;B?(k.classList.add("enabled"),A('lights',r)):(k.classList.remove("enabled"),A('lights',[0,0,0]))}function aC(B){if(q==B)return;q=B;B?j.classList.add("enabled"):j.classList.remove("enabled");A('horn',[B?1:0])}function aD(){m.value=0;n.value=0;aA(c,0);aA(d,0);aC(!1)}g.onclick=()=>{h.classList.toggle('hide');h.classList.contains('hide')?g.innerText="Show controls":g.innerText="Hide controls"};for(const B of document.querySelectorAll('.user-control-option'))B.onclick=aE;function aE(B){var C=B.target,_c=C.dataset.name,D=C.dataset.enabled=='true';if(_c=='arrows'||_c=='WSAD')D?aL(_c):aK(_c); else if(_c=='touch')aR(!D); else if(_c=='gamepad')D?aG():aF();else{console.warn(`Unknown option name`);return}C.dataset.enabled=!D;C.classList.toggle('enabled');C.innerText=`${!D?'Disable':'Enable'} ${_c}`}function aF(){navigator.getGamepads()[0]&&aH();window.addEventListener("gamepadconnected",aH);window.addEventListener("gamepaddisconnected",aI)}function aG(){window.removeEventListener("gamepadconnected",aH);window.removeEventListener("gamepaddisconnected",aI);aI()}function aH(){console.log("Gamepad connected!");!s&&(s=!0,i.classList.add('active'),t=setInterval(aJ,e))}function aI(){console.log("Gamepad disconnected!");s&&(s=!1,i.classList.remove('active'),clearInterval(t),aD())}function aJ(){var B=navigator.getGamepads(),C=B[0];if(C){var _a=C.axes[0],_b=Math.round(_a*255),_c=C.buttons[7].value,D=C.buttons[6].value,E=Math.round(_c*255),F=Math.round(D*255),G=C.buttons[0].value==1,H=C.buttons[1].value;n.value=_b;aA(c,_b);if(E>F){m.value=E;aA(d,E)}else E<F?(m.value=F*-1,aA(d,F*-1)):(m.value=0,aA(d,0));aC(G);H==1&&!u&&aB(!p);u=H}}function aK(B){if(B=='arrows')['keydown','keyup'].forEach(name=>document.addEventListener(name,aN)); else if(B=='WSAD')['keydown','keyup'].forEach(name=>document.addEventListener(name,aM));else{console.log(`Unknown keyboard control option to enable: '${B}'`);return}j.innerText="Horn (space)";k.innerText="Lights (L)"}function aL(B){if(B=='arrows')['keydown','keyup'].forEach(name=>document.removeEventListener(name,aN)); else if(B=='WSAD')['keydown','keyup'].forEach(name=>document.removeEventListener(name,aM));else{console.log(`Unknown keyboard control option to disable: '${B}'`);return}j.innerText="Horn";k.innerText="Lights";aD()}function aM(B){aO(B);aQ(aP(B,'w','s','a','d'))}function aN(B){aO(B);aQ(aP(B,'ArrowUp','ArrowDown','ArrowLeft','ArrowRight'))}function aO(B){var C=B.type=='keydown';B.key==' '?aC(C):B.key=='l'&&C&&aB(!p)}function aP(B,C,_c,D,E){var F=B.key,G=B.type=='keydown';if(F==C){v=G;return'driving'}if(F==_c){w=G;return'driving'}if(F==D){x=G;return'turning'}if(F==E){y=G;return'turning'}return""}function aQ(B){if(B=='driving')if(v==w){aA(d,0);m.value=0} else if(v){aA(d,255);m.value=255}else w&&(aA(d,-255),m.value=-255);if(B=='turning')if(x==y){aA(c,0);n.value=0} else if(y){aA(c,255);n.value=255}else x&&(aA(c,-255),n.value=-255)}function aR(B){n.disabled=!B;m.disabled=!B;j.disabled=!B;k.disabled=!B;aD()}m.addEventListener('input',()=>aA(d,m.value));n.addEventListener('input',()=>aA(c,n.value));for(const B of ['mouseup','touchend']){m.addEventListener(B,()=>{aA(d,0);m.value=0});n.addEventListener(B,()=>{aA(c,0);n.value=0})}for(const B of ['mousedown','touchstart'])j.addEventListener(B,()=>aC(!0));for(const B of ['mouseup','touchend'])j.addEventListener(B,()=>aC(!1));k.onclick=()=>{p=!p;aB(p)};l.onchange=B=>{var C=B.target.value,r=parseInt(C.substr(1,2),16),g=parseInt(C.substr(3,2),16),b=parseInt(C.substr(5,2),16);r=[r,g,b];p&&aB(!0)};document.getElementById('fullscreen-button').addEventListener('click',()=>document.body.requestFullscreen());)""";

const char STYLE_CONTENT[] PROGMEM = R"""(body{display:flex;justify-content:center;align-items:center;height:100vh;margin:0;padding:0;font-family:Arial,sans-serif;background-color:#333;color:#fff}.hide{display:none!important}button{color:#fff;border:none;text-align:center;text-decoration:none;display:inline-block;font-size:16px;padding:5px;height:28px}.settings-container{position:absolute;top:10px;right:10px;color:#fff}#connect-button{background-color:#fd616c}#fullscreen-button{background-color:#5f9ea0}#show-advanced-settings-button{background-color:#222453}#show-user-controlls-button{background-color:#8467e3;width:140px}#user-control-options-container{display:flex;flex-direction:column;align-items:flex-end;width:100%;padding-top:5px}.user-control-option{display:block;margin-right:0;width:140px;background-color:#434343}.user-control-option.enabled{background-color:#5f9ea0}.user-control-option.enabled[data-name=gamepad]:not(.active){background-color:orange}.features-container{position:absolute;bottom:10px;right:10px;color:#fff}#horn-button{width:130px;background-color:#325a21;float:left}#horn-button.enabled{background-color:#509433}#horn-button:disabled{color:#646262}#toggle-lights-button{width:130px;background-color:#425a76;margin-right:0;float:left}#toggle-lights-button.enabled{background-color:#4a9cff}#toggle-lights-button:disabled{color:#646262}#lights-color-picker{margin-left:0;height:28px;float:left}#advanced-settings-container{position:absolute;border:2px solid #fff;background-color:#434343;left:30%;top:25%;width:40%;height:40%}#close-advanced-settings-button{float:right;color:#000}.slider-container{width:40%;height:80%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-right:8%}.slider{width:100%;position:relative}.vertical-slider{writing-mode:bt-lr;transform:rotate(-90deg);margin-top:10%}.slider::-webkit-slider-thumb{width:60px;height:60px;background-color:#fff;border-radius:50%;position:relative;z-index:9999;transform:translateX(-50%) translateY(-50%) scale(4)!important}.slider::-moz-range-thumb{width:60px;height:60px;background-color:#fff;border-radius:50%;position:relative;z-index:9999;transform:translateX(-50%) translateY(-50%) scale(2)!important}.slider::-ms-thumb{width:60px;height:60px;background-color:#fff;border-radius:50%;position:relative;z-index:9999;transform:translateX(-50%) translateY(-50%) scale(2)!important}.slider::before{content:'';width:100%;height:8px;background-color:#555;position:absolute;top:50%;transform:translateY(-50%);z-index:0}.slider::-webkit-slider-runnable-track{width:100%;height:8px;background-color:#555;position:relative;z-index:0}.slider::-moz-range-track{width:100%;height:8px;background-color:#555;position:relative;z-index:0}.slider::-ms-track{width:100%;height:8px;background-color:#555;position:relative;z-index:0}.slider::-moz-range-progress{height:8px;background-color:#fff;position:relative;z-index:1})""";


void initStaticContentEndpoints(AsyncWebServer *server) {
	server->on("/advanced_scripts.js", HTTP_GET, [](AsyncWebServerRequest *request)
			  { request->send(200, "text/javascript", ADVANCED_SCRIPTS_CONTENT); });

	server->on("/index.html", HTTP_GET, [](AsyncWebServerRequest *request)
			  { request->send(200, "text/html", INDEX_CONTENT); });

	server->on("/scripts.js", HTTP_GET, [](AsyncWebServerRequest *request)
			  { request->send(200, "text/javascript", SCRIPTS_CONTENT); });

	server->on("/style.css", HTTP_GET, [](AsyncWebServerRequest *request)
			  { request->send(200, "text/css", STYLE_CONTENT); });

}


#endif // STATIC_WEBSITE_CONTENT_H
